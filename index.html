<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå≥ FAA Wildlife‚Ñ¢ Dashboard</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Chart.js for graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Apply Inter font to the body */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom glow effect for buttons */
        .glow-btn {
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            transition: box-shadow 0.3s ease-in-out;
        }
        .glow-btn:hover {
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
        }
        /* Hide scrollbar for specific elements for cleaner look, but allow content to scroll */
        .overflow-y-auto-hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .overflow-y-auto-hide-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="min-h-screen bg-gray-100 flex flex-col lg:flex-row font-sans">

    <!-- Mobile Header (Visible on small screens) -->
    <header id="mobile-header" class="bg-white shadow p-4 flex items-center justify-between lg:hidden">
        <h1 class="text-xl font-bold text-indigo-700">FAA Wildlife Dashboard</h1>
        <button id="mobile-sidebar-toggle" class="p-2 rounded-md text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>
    </header>

    <!-- Sidebar Navigation -->
    <aside id="sidebar" class="fixed inset-y-0 left-0 bg-gray-800 text-white w-64 p-6 overflow-y-auto z-40 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out lg:relative lg:flex-shrink-0">
        <div class="flex items-center justify-between mb-8">
            <h2 class="text-2xl font-bold text-green-400">üå≥ FAA Wildlife‚Ñ¢</h2>
            <button id="sidebar-close" class="p-1 rounded-md text-gray-400 hover:bg-gray-700 lg:hidden focus:outline-none focus:ring-2 focus:ring-green-500">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        <nav id="sidebar-nav">
            <!-- Navigation items will be dynamically inserted here by JavaScript -->
        </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 p-6 lg:p-8 overflow-auto">
        <div class="max-w-7xl mx-auto">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-extrabold text-gray-800 hidden lg:block">
                    üìä FAA Wildlife Dashboard‚Ñ¢
                </h1>
                <!-- RHS Panel Toggle Button -->
                <button id="rhs-panel-toggle" class="p-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                    <span class="ml-2 hidden md:inline">Toggle Info Panel</span>
                </button>
            </div>
            <div id="main-content-area">
                <!-- Dynamic content will be rendered here by JavaScript -->
            </div>
        </div>
    </main>

    <!-- Right-Hand Side Panel -->
    <aside id="rhs-panel" class="fixed inset-y-0 right-0 bg-gray-800 text-white w-64 p-6 overflow-y-auto z-40 transform translate-x-full transition-transform duration-300 ease-in-out shadow-lg">
        <div class="flex items-center justify-between mb-8">
            <h2 id="rhs-panel-title" class="text-xl font-bold text-blue-400">Info Panel</h2>
            <button id="rhs-panel-close" class="p-1 rounded-md text-gray-400 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        <div id="rhs-panel-content">
            <!-- Dynamic RHS content will be rendered here by JavaScript -->
        </div>
    </aside>

    <script>
        // Data for all wildlife protocols, synthesized from the images and user input
        const protocolsData = {
            EcoGuard: {
                protocolName: "EcoGuard‚Ñ¢ Core Protocol Overview",
                tagline: "EcoGuard‚Ñ¢ is an innovative FAA.Zone‚Ñ¢ protocol, specifically engineered for the demands of the Wildlife & Habitat industry. Its deep integration with the PulseGrid‚Ñ¢ ensures secure, real-time data flows and enhanced decision-making.",
                keyFeatures: [
                    "Direct integration with FAA Professional Services Mesh‚Ñ¢.",
                    "Advanced data sync with GuardEco‚Ñ¢.",
                    "Real-time compliance validation via VaultLink‚Ñ¢ (wildlife specific).",
                    "Scalable architecture for x48 node expansion.",
                    "Predictive analytics module for EcoGuard‚Ñ¢ performance.",
                    "API access for seamless interoperability.",
                    "Cross-sector data interoperability.",
                    "Self-optimizing node distribution for peak efficiency.",
                    "AI-driven anomaly detection and fraud prevention.",
                ],
                subNodes: ["GuardEco‚Ñ¢", "LinkHabitat‚Ñ¢", "TraceWild‚Ñ¢"],
                metadata: {
                    productId: "ECO-WIL-2564",
                    vaultId: "VAULT-UXRD",
                    signalEchoLayer: "Layer Alpha v2.6",
                    deploymentZone: "Zone A 5",
                    securityRating: "FAA-SEC A+",
                    activeNodes: "2,856",
                    lastAudit: "2025-06-26",
                    complianceStatus: "Active & Certified",
                },
                metrics: {
                    currentPulseActivity: "98,839 pulses/sec",
                    dataVolumeProcessed: "98.71 TB",
                    latencyAverage: "96 ms",
                },
                ledgerEntries: [
                    "#4623 - ECOGU Pulse Tx - Pending",
                    "#6075 - WILDL Data Sync - Error",
                    "#2992 - Node Actuation Confirm - Offline",
                    "#231 - VaultTrace‚Ñ¢ Audit - Passed",
                ],
            },
            HabitatLink: {
                protocolName: "HabitatLink‚Ñ¢ Core Protocol Overview",
                tagline: "HabitatLink‚Ñ¢ is the premier FAA.Zone‚Ñ¢ platform, revolutionizing Wildlife & Habitat operations. Leveraging the global PulseGrid‚Ñ¢, it offers robust data synchronization and superior efficiency.",
                keyFeatures: [
                    "Direct integration with FAA Professional Services Mesh‚Ñ¢.",
                    "Advanced data sync with NodeBio‚Ñ¢.",
                    "Real-time compliance validation via VaultLink‚Ñ¢ (wildlife specific).",
                    "Scalable architecture for x42 node expansion.",
                    "Predictive analytics module for HabitatLink‚Ñ¢ performance.",
                    "API access for seamless interoperability.",
                    "Cross-sector data interoperability.",
                    "Blockchain-secured data provenance.",
                    "Secure multi-party computation support.",
                ],
                subNodes: ["NodeBio‚Ñ¢", "MeshConserv‚Ñ¢", "SyncSpecies‚Ñ¢"],
                metadata: {
                    productId: "HAB-WIL-6298",
                    vaultId: "VAULT-7VJ9",
                    signalEchoLayer: "Layer Alpha v1.7",
                    deploymentZone: "Zone E 10",
                    securityRating: "FAA-SEC B+",
                    activeNodes: "1,927",
                    lastAudit: "2025-06-20",
                    complianceStatus: "Active & Certified",
                },
                metrics: {
                    currentPulseActivity: "41,894 pulses/sec",
                    dataVolumeProcessed: "62.65 TB",
                    latencyAverage: "89 ms",
                },
                ledgerEntries: [
                    "#9832 - HABIT Pulse Tx - Confirmed",
                    "#8821 - WILDL Data Sync - Completed",
                    "#7296 - Node Actuation Confirm - Offline",
                    "#9639 - VaultTrace‚Ñ¢ Audit - Passed",
                ],
            },
            WildTrace: {
                protocolName: "WildTrace‚Ñ¢ Core Protocol Overview",
                tagline: "WildTrace‚Ñ¢ is a leading protocol for comprehensive wildlife tracking and behavior analysis. It provides granular data on species movement and ecosystem health.",
                keyFeatures: [
                    "AI-driven movement pattern analysis.",
                    "Real-time anomaly detection for unauthorized activity.",
                    "Integration with Sentinel Ring‚Ñ¢ fauna tags.",
                    "Predictive migration route forecasting.",
                    "Automated health and stress alerts for tagged animals.",
                ],
                subNodes: ["ProtectZone‚Ñ¢", "FlowNature‚Ñ¢", "GridPreserve‚Ñ¢"],
                metadata: {
                    productId: "WLD-TRC-8711",
                    vaultId: "VAULT-K23L",
                    signalEchoLayer: "Layer Beta v3.1",
                    deploymentZone: "Zone C 7",
                    securityRating: "FAA-SEC A",
                    activeNodes: "1,450",
                    lastAudit: "2025-07-01",
                    complianceStatus: "Active & Certified",
                },
                metrics: {
                    currentPulseActivity: "35,123 pulses/sec",
                    dataVolumeProcessed: "21.45 TB",
                    latencyAverage: "105 ms",
                },
                ledgerEntries: [
                    "#3145 - WILDL Data Sync - Completed",
                    "#5890 - Node Actuation Confirm - Online",
                    "#7772 - VaultTrace‚Ñ¢ Audit - Passed",
                ],
            },
            BioNode: {
                protocolName: "BioNode‚Ñ¢ Core Protocol Overview",
                tagline: "BioNode‚Ñ¢ focuses on environmental and biological data collection. It provides critical insights into ecosystem health and biodiversity within conservation zones.",
                keyFeatures: [
                    "Automated biosensor data collection.",
                    "Real-time air and soil quality monitoring.",
                    "Infrasound detection for poaching activity.",
                    "Integration with climate and weather APIs.",
                    "Data validation against VaultMesh‚Ñ¢ ecological scrolls.",
                ],
                subNodes: ["VaultFauna‚Ñ¢", "EcoID‚Ñ¢", "HabitatScan‚Ñ¢"],
                metadata: {
                    productId: "BIO-NOD-9002",
                    vaultId: "VAULT-L5P7",
                    signalEchoLayer: "Layer Gamma v1.0",
                    deploymentZone: "Zone B 3",
                    securityRating: "FAA-SEC B+",
                    activeNodes: "890",
                    lastAudit: "2025-07-05",
                    complianceStatus: "Active & Certified",
                },
                metrics: {
                    currentPulseActivity: "12,789 pulses/sec",
                    dataVolumeProcessed: "10.11 TB",
                    latencyAverage: "112 ms",
                },
                ledgerEntries: [
                    "#1021 - BIO-NOD Pulse Tx - Confirmed",
                    "#4489 - WILDL Data Sync - Completed",
                    "#6523 - VaultTrace‚Ñ¢ Audit - Passed",
                ],
            },
            ConservMesh: {
                protocolName: "ConservMesh‚Ñ¢ Core Protocol Overview",
                tagline: "ConservMesh‚Ñ¢ is designed for large-scale habitat conservation, providing tools for resource management and coordinated response to environmental changes.",
                keyFeatures: [
                    "Multi-region data aggregation and analysis.",
                    "Predictive modeling for resource allocation.",
                    "Integration with drone and ground sensor networks.",
                    "Automated alert systems for environmental threats.",
                    "Blockchain-based verification of conservation efforts.",
                ],
                subNodes: ["WildMesh‚Ñ¢", "NodeBio‚Ñ¢", "ConservFlow‚Ñ¢"],
                metadata: {
                    productId: "CON-MSH-7833",
                    vaultId: "VAULT-9QJ2",
                    signalEchoLayer: "Layer Delta v4.0",
                    deploymentZone: "Zone K 12",
                    securityRating: "FAA-SEC A+",
                    activeNodes: "3,501",
                    lastAudit: "2025-06-29",
                    complianceStatus: "Active & Certified",
                },
                metrics: {
                    currentPulseActivity: "78,561 pulses/sec",
                    dataVolumeProcessed: "88.92 TB",
                    latencyAverage: "85 ms",
                },
                ledgerEntries: [
                    "#7521 - CON-MSH Pulse Tx - Confirmed",
                    "#1142 - WILDL Data Sync - Completed",
                    "#3309 - VaultTrace‚Ñ¢ Audit - Passed",
                ],
            },
            SpeciesSync: {
                protocolName: "SpeciesSync‚Ñ¢ Core Protocol Overview",
                tagline: "SpeciesSync‚Ñ¢ is a specialized protocol for tracking and managing specific species populations. It provides detailed population metrics and health data.",
                keyFeatures: [
                    "Population count and density analysis.",
                    "Behavioral pattern monitoring.",
                    "Health and mortality trend tracking.",
                    "Integration with Fauna Tag‚Ñ¢ portals.",
                    "AI-driven species identification.",
                ],
                subNodes: ["SpeciesTrace‚Ñ¢", "ZoneLink‚Ñ¢", "NatureNode‚Ñ¢"],
                metadata: {
                    productId: "SPC-SYN-4187",
                    vaultId: "VAULT-3G8F",
                    signalEchoLayer: "Layer Epsilon v1.2",
                    deploymentZone: "Zone R 6",
                    securityRating: "FAA-SEC B",
                    activeNodes: "985",
                    lastAudit: "2025-07-03",
                    complianceStatus: "Active & Certified",
                },
                metrics: {
                    currentPulseActivity: "22,543 pulses/sec",
                    dataVolumeProcessed: "15.34 TB",
                    latencyAverage: "110 ms",
                },
                ledgerEntries: [
                    "#8765 - SPC-SYN Pulse Tx - Confirmed",
                    "#9910 - WILDL Data Sync - Completed",
                    "#1245 - VaultTrace‚Ñ¢ Audit - Passed",
                ],
            },
            ZoneProtect: {
                protocolName: "ZoneProtect‚Ñ¢ Core Protocol Overview",
                tagline: "ZoneProtect‚Ñ¢ establishes secure digital perimeters around sensitive conservation zones, providing real-time threat detection and automated response protocols.",
                keyFeatures: [
                    "Automated perimeter security alerts.",
                    "Integration with physical sensor networks and security drones.",
                    "AI-driven threat pattern recognition.",
                    "Automated lockdown and alert dispatch protocols.",
                    "Real-time GPS tracking of unauthorized entries.",
                ],
                subNodes: ["PreserveGrid‚Ñ¢", "FaunaSync‚Ñ¢", "EcoPulse‚Ñ¢"],
                metadata: {
                    productId: "ZON-PRO-5566",
                    vaultId: "VAULT-8T7L",
                    signalEchoLayer: "Layer Zeta v2.1",
                    deploymentZone: "Zone W 9",
                    securityRating: "FAA-SEC A+",
                    activeNodes: "2,100",
                    lastAudit: "2025-06-25",
                    complianceStatus: "Active & Certified",
                },
                metrics: {
                    currentPulseActivity: "65,432 pulses/sec",
                    dataVolumeProcessed: "55.87 TB",
                    latencyAverage: "91 ms",
                },
                ledgerEntries: [
                    "#1123 - ZON-PRO Pulse Tx - Confirmed",
                    "#4567 - WILDL Data Sync - Completed",
                    "#9876 - VaultTrace‚Ñ¢ Audit - Passed",
                ],
            },
            NatureFlow: {
                protocolName: "NatureFlow‚Ñ¢ Core Protocol Overview",
                tagline: "NatureFlow‚Ñ¢ is an ecosystem monitoring and restoration protocol. It analyzes data from diverse sources to guide sustainable habitat management and re-wilding efforts.",
                keyFeatures: [
                    "Ecosystem health score generation.",
                    "Biodiversity trend analysis.",
                    "Water and nutrient cycle monitoring.",
                    "Integration with environmental sensor networks.",
                    "Predictive modeling for restoration projects.",
                ],
                subNodes: ["HabitatFlow‚Ñ¢", "WildTrace‚Ñ¢", "BioNode‚Ñ¢"],
                metadata: {
                    productId: "NAT-FLO-1010",
                    vaultId: "VAULT-2W3Y",
                    signalEchoLayer: "Layer Theta v1.5",
                    deploymentZone: "Zone S 4",
                    securityRating: "FAA-SEC B+",
                    activeNodes: "1,500",
                    lastAudit: "2025-07-08",
                    complianceStatus: "Active & Certified",
                },
                metrics: {
                    currentPulseActivity: "45,678 pulses/sec",
                    dataVolumeProcessed: "30.15 TB",
                    latencyAverage: "98 ms",
                },
                ledgerEntries: [
                    "#2345 - NAT-FLO Pulse Tx - Confirmed",
                    "#6789 - WILDL Data Sync - Completed",
                    "#1357 - VaultTrace‚Ñ¢ Audit - Passed",
                ],
            },
            PreserveGrid: {
                protocolName: "PreserveGrid‚Ñ¢ Core Protocol Overview",
                tagline: "PreserveGrid‚Ñ¢ provides a robust decentralized grid for coordinating conservation activities. It ensures that all conservation data is securely synchronized and shared.",
                keyFeatures: [
                    "Decentralized data mesh for conservation teams.",
                    "Secure messaging and resource allocation tools.",
                    "Integration with PreserveGrid‚Ñ¢ hardware.",
                    "Immutable log of all conservation actions.",
                    "Automated reporting for government and NGO compliance.",
                ],
                subNodes: ["ConservLink‚Ñ¢", "SpeciesMesh‚Ñ¢", "ZoneFlow‚Ñ¢"],
                metadata: {
                    productId: "PRE-GRD-9900",
                    vaultId: "VAULT-4F5G",
                    signalEchoLayer: "Layer Iota v3.0",
                    deploymentZone: "Zone P 1",
                    securityRating: "FAA-SEC A",
                    activeNodes: "2,900",
                    lastAudit: "2025-07-11",
                    complianceStatus: "Active & Certified",
                },
                metrics: {
                    currentPulseActivity: "71,234 pulses/sec",
                    dataVolumeProcessed: "75.21 TB",
                    latencyAverage: "88 ms",
                },
                ledgerEntries: [
                    "#4112 - PRE-GRD Pulse Tx - Confirmed",
                    "#8923 - WILDL Data Sync - Completed",
                    "#5678 - VaultTrace‚Ñ¢ Audit - Passed",
                ],
            },
            FaunaVault: {
                protocolName: "FaunaVault‚Ñ¢ Core Protocol Overview",
                tagline: "FaunaVault‚Ñ¢ is the ultimate secure data vault for all wildlife and habitat-related information. It guarantees data integrity, privacy, and immutability.",
                keyFeatures: [
                    "Homomorphic encryption for private data analysis.",
                    "Distributed ledger for immutable data storage.",
                    "Automated data backups to the VaultMesh‚Ñ¢.",
                    "Access control via sovereign scrolls.",
                    "Auditable trail for all data modifications.",
                ],
                subNodes: ["NatureSync‚Ñ¢", "PreserveTrace‚Ñ¢", "FaunaNode‚Ñ¢"],
                metadata: {
                    productId: "FAU-VLT-7755",
                    vaultId: "VAULT-9X9Z",
                    signalEchoLayer: "Layer Kappa v4.5",
                    deploymentZone: "Zone V 8",
                    securityRating: "FAA-SEC A+",
                    activeNodes: "3,120",
                    lastAudit: "2025-07-15",
                    complianceStatus: "Active & Certified",
                },
                metrics: {
                    currentPulseActivity: "85,678 pulses/sec",
                    dataVolumeProcessed: "99.01 TB",
                    latencyAverage: "80 ms",
                },
                ledgerEntries: [
                    "#5001 - FAU-VLT Pulse Tx - Confirmed",
                    "#7007 - WILDL Data Sync - Completed",
                    "#9009 - VaultTrace‚Ñ¢ Audit - Passed",
                ],
            },
        };

        // Data for wildlife brands and sub-nodes
        const wildlifeBrands = ['EcoGuard‚Ñ¢', 'HabitatLink‚Ñ¢', 'WildTrace‚Ñ¢', 'BioNode‚Ñ¢', 'ConservMesh‚Ñ¢', 'SpeciesSync‚Ñ¢', 'ZoneProtect‚Ñ¢', 'NatureFlow‚Ñ¢', 'PreserveGrid‚Ñ¢', 'FaunaVault‚Ñ¢'];
        const wildlifeSubNodes = [
            ['GuardEco‚Ñ¢', 'LinkHabitat‚Ñ¢', 'TraceWild‚Ñ¢'],
            ['NodeBio‚Ñ¢', 'MeshConserv‚Ñ¢', 'SyncSpecies‚Ñ¢'],
            ['ProtectZone‚Ñ¢', 'FlowNature‚Ñ¢', 'GridPreserve‚Ñ¢'],
            ['VaultFauna‚Ñ¢', 'EcoID‚Ñ¢', 'HabitatScan‚Ñ¢'],
            ['WildMesh‚Ñ¢', 'NodeBio‚Ñ¢', 'ConservFlow‚Ñ¢'],
            ['SpeciesTrace‚Ñ¢', 'ZoneLink‚Ñ¢', 'NatureNode‚Ñ¢'],
            ['PreserveGrid‚Ñ¢', 'FaunaSync‚Ñ¢', 'EcoPulse‚Ñ¢'],
            ['HabitatFlow‚Ñ¢', 'WildTrace‚Ñ¢', 'BioNode‚Ñ¢'],
            ['ConservLink‚Ñ¢', 'SpeciesMesh‚Ñ¢', 'ZoneFlow‚Ñ¢'],
            ['NatureSync‚Ñ¢', 'PreserveTrace‚Ñ¢', 'FaunaNode‚Ñ¢']
        ];

        // Combine into a more usable structure for brands
        const brandData = wildlifeBrands.map((brand, index) => ({
            name: brand,
            subNodes: wildlifeSubNodes[index] || [] // Ensure subNodes is an array
        }));

        // NEW: Global data for individual species
        const speciesData = [
            {
                id: 'species-001',
                name: 'African Elephant',
                scientificName: 'Loxodonta africana',
                population: '400,000',
                conservationStatus: 'Endangered',
                habitat: 'Savanna, Forests',
                associatedProtocol: 'WildTrace‚Ñ¢',
                lastObserved: '2025-07-18',
                location: 'Kenya, Tsavo East',
                description: 'The largest land animal, crucial for ecosystem engineering. Monitored via Sentinel Ring‚Ñ¢ tags.'
            },
            {
                id: 'species-002',
                name: 'Black Rhino',
                scientificName: 'Diceros bicornis',
                population: '5,600',
                conservationStatus: 'Critically Endangered',
                habitat: 'Grasslands, Savanna',
                associatedProtocol: 'ZoneProtect‚Ñ¢',
                lastObserved: '2025-07-17',
                location: 'South Africa, Kruger National Park',
                description: 'Heavily protected due to poaching threats. Monitored by Baobab PermaFence‚Ñ¢ security perimeters.'
            },
            {
                id: 'species-003',
                name: 'Lion',
                scientificName: 'Panthera leo',
                population: '20,000',
                conservationStatus: 'Vulnerable',
                habitat: 'Savanna, Grasslands',
                associatedProtocol: 'WildTrace‚Ñ¢',
                lastObserved: '2025-07-19',
                location: 'Tanzania, Serengeti National Park',
                description: 'Apex predator, monitored for population dynamics and movement patterns.'
            },
            {
                id: 'species-004',
                name: 'Grevy\'s Zebra',
                scientificName: 'Equus grevyi',
                population: '3,000',
                conservationStatus: 'Endangered',
                habitat: 'Semi-arid grasslands',
                associatedProtocol: 'SpeciesSync‚Ñ¢',
                lastObserved: '2025-07-16',
                location: 'Kenya, Samburu',
                description: 'Largest and most threatened zebra species, tracked for population health.'
            },
            {
                id: 'species-005',
                name: 'Cheetah',
                scientificName: 'Acinonyx jubatus',
                population: '7,100',
                conservationStatus: 'Vulnerable',
                habitat: 'Grasslands, Savanna',
                associatedProtocol: 'WildTrace‚Ñ¢',
                lastObserved: '2025-07-19',
                location: 'Namibia, Etosha National Park',
                description: 'Fastest land animal, monitored for habitat range and human-wildlife conflict.'
            },
            {
                id: 'species-006',
                name: 'Pangolin',
                scientificName: 'Pholidota',
                population: 'Declining', // Specific numbers are hard to get due to their elusive nature and poaching
                conservationStatus: 'Critically Endangered', // Varies by species, but generally severe
                habitat: 'Forests, Savanna',
                associatedProtocol: 'ZoneProtect‚Ñ¢',
                lastObserved: '2025-07-10',
                location: 'Various African & Asian regions',
                description: 'World\'s most trafficked mammal, highly vulnerable to illegal trade. Monitored with advanced security protocols.'
            },
            {
                id: 'species-007',
                name: 'Gorilla',
                scientificName: 'Gorilla gorilla',
                population: 'Declining',
                conservationStatus: 'Critically Endangered',
                habitat: 'Forests',
                associatedProtocol: 'BioNode‚Ñ¢',
                lastObserved: '2025-07-15',
                location: 'Central Africa',
                description: 'Great ape species facing severe threats from habitat loss and poaching. BioNode‚Ñ¢ sensors monitor their forest habitats.'
            },
            {
                id: 'species-008',
                name: 'Giraffe',
                scientificName: 'Giraffa camelopardalis',
                population: '117,000',
                conservationStatus: 'Vulnerable',
                habitat: 'Savanna, Woodlands',
                associatedProtocol: 'NatureFlow‚Ñ¢',
                lastObserved: '2025-07-18',
                location: 'Various African regions',
                description: 'Tallest mammal, monitored for population health and environmental changes affecting their browsing habitats.'
            },
            {
                id: 'species-009',
                name: 'African Wild Dog',
                scientificName: 'Lycaon pictus',
                population: '6,600',
                conservationStatus: 'Endangered',
                habitat: 'Savanna, Woodlands',
                associatedProtocol: 'WildTrace‚Ñ¢',
                lastObserved: '2025-07-17',
                location: 'Southern & Eastern Africa',
                description: 'Highly social carnivore, tracked for pack dynamics and range expansion.'
            },
            {
                id: 'species-010',
                name: 'Panda',
                scientificName: 'Ailuropoda melanoleuca',
                population: '1,800',
                conservationStatus: 'Vulnerable',
                habitat: 'Mountain forests',
                associatedProtocol: 'BioNode‚Ñ¢',
                lastObserved: '2025-07-14',
                location: 'China',
                description: 'Iconic bamboo-eating bear, monitored for habitat preservation and population growth.'
            },
        ];

        // Data structure for navigation/content (hierarchical)
        const dashboardSections = [
            {
                category: "Wildlife Dashboard",
                type: "link", // Direct links, no nested dropdown
                items: [
                    {
                        icon: "ÔøΩ",
                        button: "View Map",
                        description: "Primary map interface with live hardware overlays",
                        component: "MapComponent"
                    },
                    {
                        icon: "üõ∞",
                        button: "View Drone Feeds",
                        description: "Real-time drone surveillance for reserves",
                        component: "DroneFeedsComponent"
                    },
                    {
                        icon: "üß¨",
                        button: "View Tagged Species",
                        description: "View Sentinel Ring‚Ñ¢ trackers by animal",
                        component: "TrackerComponent"
                    },
                    {
                        icon: "üîã",
                        button: "Power Monitor",
                        description: "Hardware battery view across deployments",
                        component: "PowerMonitorComponent"
                    },
                    {
                        icon: "üå°",
                        button: "Environment Data",
                        description: "Geo Lens‚Ñ¢ readings for live biosensors",
                        component: "EnvironmentComponent"
                    },
                    // NEW: Species Management button
                    {
                        icon: "üêæ", // Paw print icon
                        button: "Species Management", // Removed ‚Ñ¢
                        description: "Manage and view detailed information for all tracked species.",
                        component: "SpeciesManagementComponent"
                    },
                ]
            },
            {
                category: "Alerts & Risk",
                type: "link",
                items: [
                    {
                        icon: "üö®",
                        button: "Poacher Alerts",
                        description: "Poacher trigger zones and incident log",
                        component: "PoacherAlertsComponent"
                    },
                    {
                        icon: "üõë",
                        button: "Access Risk",
                        description: "Shows access attempts outside license",
                        component: "AccessRiskComponent"
                    },
                ]
            },
            {
                category: "Timeline",
                type: "link",
                items: [
                    {
                        icon: "üóì",
                        button: "Timeline View",
                        description: "Time-linked scroll data lifecycle view",
                        component: "TimelineComponent"
                    },
                ]
            },
            {
                category: "Scroll Heatmap",
                type: "link",
                items: [
                    {
                        icon: "üî•",
                        button: "Scroll Activity Heatmap",
                        description: "Map layer showing scroll intensity by km¬≤",
                        component: "HeatmapComponent"
                    },
                ]
            },
            {
                category: "Deployment Tools",
                type: "link",
                items: [
                    {
                        icon: "üßÆ",
                        button: "Deployment Calculator",
                        description: "Estimate hardware + scroll needs",
                        component: "DeploymentCalculatorComponent"
                    },
                    {
                        icon: "üß†",
                        button: "AI Recommender",
                        description: "Auto tool for hardware/scroll pairing",
                        component: "AIRecommenderComponent"
                    },
                ]
            },
            {
                category: "Hardware Panel",
                type: "link",
                items: [
                    {
                        icon: "üõí",
                        button: "Storefront",
                        description: "Scroll-verified product listings",
                        component: "HardwareStorefrontComponent"
                    },
                    {
                        icon: "üì¶",
                        button: "Item Detail",
                        description: "Per-SKU breakdown with VaultLink‚Ñ¢",
                        component: "ItemDetailComponent"
                    },
                    {
                        icon: "üÜö",
                        button: "Compare Products",
                        description: "Specs and scroll coverage comparison",
                        component: "CompareProductsComponent"
                    },
                    {
                        icon: "üìÑ",
                        button: "Scroll Compatibility",
                        description: "Real-time compatibility validator",
                        component: "CompatibilityCheckComponent"
                    },
                    {
                        icon: "üîê",
                        button: "Warranty Scroll",
                        description: "Legal warranty linked to product",
                        component: "WarrantyComponent"
                    },
                ]
            },
            {
                category: "Licensing Panel",
                type: "link",
                items: [
                    {
                        icon: "üìú",
                        button: "Scroll Manager",
                        description: "Master list of wildlife scrolls",
                        component: "ScrollManagerComponent"
                    },
                    {
                        icon: "‚úçÔ∏è",
                        button: "Issue Scroll",
                        description: "Scroll creation with deployment sync",
                        component: "CreateLicenseComponent"
                    },
                    {
                        icon: "üßæ",
                        button: "Generate Scroll PDF",
                        description: "PDF builder with scroll metadata",
                        component: "GeneratePDFComponent"
                    },
                    {
                        icon: "üìä",
                        button: "Region View",
                        description: "Full licensed coverage viewer",
                        component: "LicenseMapComponent"
                    },
                ]
            },
            {
                category: "Vault Panel",
                type: "link",
                items: [
                    {
                        icon: "üîí",
                        button: "Sync Logs",
                        description: "Log of all license and node syncs",
                        component: "VaultLogsComponent"
                    },
                ]
            },
            {
                category: "Sector Core Brands",
                type: "nested", // Indicates this category has sub-items that can be expanded
                items: wildlifeBrands.map(brand => ({
                    icon: "üå±",
                    button: brand, // The name of the brand
                    component: "BrandDetailsComponent",
                    brandDetails: protocolsData[brand.replace('‚Ñ¢', '')] // Pass the full protocol data for the brand (remove ‚Ñ¢ for key lookup)
                }))
            },
            {
                category: "Legacy HTML Pages",
                type: "nested",
                items: [
                    {
                        icon: "üìÑ",
                        button: "Wildlife Dashboard (HTML)",
                        description: "Original Wildlife Dashboard HTML page.",
                        component: "WildlifeDashboardHTMLComponent"
                    },
                    {
                        icon: "üìÑ",
                        button: "Quick View (HTML)",
                        description: "Original Quick View HTML page.",
                        component: "QuickViewHTMLComponent"
                    },
                    {
                        icon: "üìÑ",
                        button: "Kenya Deployment (HTML)",
                        description: "Original Kenya Deployment HTML page.",
                        component: "KenyaDeploymentHTMLComponent"
                    },
                    {
                        icon: "üìÑ",
                        button: "Core Node (HTML)",
                        description: "Original Core Node HTML page.",
                        component: "CoreNodeHTMLComponent"
                    },
                ]
            }
        ];

        // Global state variables
        let activeContent = {
            component: 'TrackerComponent',
            props: { description: 'View Sentinel Ring‚Ñ¢ trackers by animal' }
        };
        let isSidebarOpen = false;
        let isRhsPanelOpen = false;
        let openCategory = null;
        let currentChartInstance = null; // To manage Chart.js instance

        // Helper function to update the DOM
        function updateDOM(selector, content, append = false) {
            const element = document.querySelector(selector);
            if (element) {
                if (append) {
                    element.innerHTML += content;
                } else {
                    element.innerHTML = content;
                }
            }
        }

        // --- Placeholder Component Render Functions ---

        function renderMapComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">üß≠ Live Wildlife Map</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for interactive map functionality]
                    </div>
                </div>
            `;
        }

        function renderDroneFeedsComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">üõ∞ Drone Surveillance Feeds</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for live drone feeds]
                    </div>
                </div>
            `;
        }

        function renderTrackerComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">üß¨ Tagged Species Tracker</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for animal tracking interface]
                    </div>
                </div>
            `;
        }

        function renderPowerMonitorComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">üîã Node Power Monitor</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for power monitoring charts/data]
                    </div>
                </div>
            `;
        }

        function renderEnvironmentComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">üå° Environment Data</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for environmental sensor data]
                    </div>
                </div>
            `;
        }

        function renderPoacherAlertsComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-red-700 mb-4">üö® Poacher Alerts</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for poacher alert system]
                    </div>
                </div>
            `;
        }

        function renderAccessRiskComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-red-700 mb-4">üõë Access Risk Alerts</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for access risk log]
                    </div>
                </div>
            `;
        }

        function renderTimelineComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">üóì Scroll Lifecycles Timeline</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for scroll lifecycle timeline]
                    </div>
                </div>
            `;
        }

        function renderHeatmapComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-orange-700 mb-4">üî• Scroll Activity Heatmap</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for interactive heatmap]
                    </div>
                </div>
            `;
        }

        function renderDeploymentCalculatorComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-purple-700 mb-4">üßÆ Deployment Calculator</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for deployment calculator UI]
                    </div>
                </div>
            `;
        }

        function renderAIRecommenderComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-purple-700 mb-4">üß† AI Recommender</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for AI recommender UI]
                    </div>
                </div>
            `;
        }

        function renderHardwareStorefrontComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-blue-700 mb-4">üõí Wildlife Hardware Storefront</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for hardware product listings]
                    </div>
                </div>
            `;
        }

        function renderItemDetailComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-blue-700 mb-4">üì¶ Item Detail View</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for item detail page]
                    </div>
                </div>
            `;
        }

        function renderCompareProductsComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-blue-700 mb-4">üÜö Compare Products</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for product comparison tool]
                    </div>
                </div>
            `;
        }

        function renderCompatibilityCheckComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-blue-700 mb-4">üìÑ Scroll Compatibility Check</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for compatibility checker]
                    </div>
                </div>
            `;
        }

        function renderWarrantyComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-blue-700 mb-4">üîê Warranty Scroll Viewer</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for warranty details]
                    </div>
                </div>
            `;
        }

        function renderScrollManagerComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-green-700 mb-4">üìú Scroll Manager</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for scroll management interface]
                    </div>
                </div>
            `;
        }

        function renderCreateLicenseComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-green-700 mb-4">‚úçÔ∏è Create Wildlife License</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for license creation form]
                    </div>
                </div>
            `;
        }

        function renderGeneratePDFComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-green-700 mb-4">üßæ Generate Scroll Document PDF</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for PDF generation tool]
                    </div>
                </div>
            `;
        }

        function renderLicenseMapComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-green-700 mb-4">üìä Licensed Coverage Map</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for interactive license map]
                    </div>
                </div>
            `;
        }

        function renderVaultLogsComponent(props) {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-gray-700 mb-4">üîí Vault Sync Logs</h3>
                    <p class="text-gray-700">${props.description}</p>
                    <div class="mt-4 h-64 bg-gray-200 rounded-md flex items-center justify-center text-gray-500">
                        [Placeholder for vault logs display]
                    </div>
                </div>
            `;
        }

        // Pricing Cards Component - now used directly within BrandDetailsComponent
        function renderPricingCardsComponent() {
            const pricingPlans = [
                {
                    name: "Basic Plan",
                    monthly: "$35",
                    annual: "$380",
                    features: [
                        "Access to core wildlife protocols",
                        "Standard data sync",
                        "Tier B payout",
                        "Conservation Zone region access",
                        "Basic reporting",
                    ],
                    buttonText: "Select Basic",
                    buttonClass: "bg-blue-600 hover:bg-blue-700"
                },
                {
                    name: "Pro Plan",
                    monthly: "$80",
                    annual: "$850",
                    features: [
                        "All Basic Plan features",
                        "Enhanced data sync & analytics",
                        "Tier A payout",
                        "Priority support (email)",
                        "Multi-region access",
                        "Advanced threat detection",
                    ],
                    buttonText: "Select Pro",
                    buttonClass: "bg-green-600 hover:bg-green-700"
                },
                {
                    name: "Enterprise Plan",
                    monthly: "Custom",
                    annual: "Custom",
                    features: [
                        "All Pro Plan features",
                        "Dedicated infrastructure",
                        "Custom integrations",
                        "24/7 Premium support (phone, chat, email)",
                        "On-site deployment options",
                        "Customizable dashboards & alerts",
                        "Compliance auditing tools",
                    ],
                    buttonText: "Contact Sales",
                    buttonClass: "bg-purple-600 hover:bg-purple-700"
                },
            ];

            return `
                <div class="mt-8">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-6 text-center">üí∞ Our Pricing Plans</h3>
                    <p class="text-gray-700 text-center mb-8">
                        Choose the plan that best fits your wildlife conservation and habitat management needs.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        ${pricingPlans.map((plan, index) => `
                            <div key="${index}" class="flex flex-col bg-gray-50 rounded-lg shadow-lg p-6 border border-gray-200">
                                <h4 class="text-xl font-bold text-gray-800 mb-3">${plan.name}</h4>
                                <div class="text-4xl font-extrabold text-green-600 mb-4">
                                    ${plan.monthly === "Custom" ? plan.monthly : `${plan.monthly}/mo`}
                                </div>
                                <ul class="flex-grow list-disc list-inside text-sm text-gray-600 space-y-2 mb-6">
                                    ${plan.features.map((feature, fIndex) => `
                                        <li key="${fIndex}">${feature}</li>
                                    `).join('')}
                                </ul>
                                <button
                                    class="mt-auto w-full py-3 px-6 rounded-md text-white font-semibold transition-colors duration-200 ${plan.buttonClass}"
                                >
                                    ${plan.buttonText}
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // Component to display Brand details and sub-nodes
        function renderBrandDetailsComponent(props) {
            const brandDetails = props.brandDetails;
            if (!brandDetails) {
                return `
                    <div class="p-6 bg-white rounded-lg shadow-md text-center text-gray-500">
                        <h3 class="text-2xl font-bold text-red-500 mb-4">Brand Data Not Found</h3>
                        <p>Please select a brand from the sidebar to view its details.</p>
                    </div>
                `;
            }

            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-green-700 mb-4">üå± ${brandDetails.protocolName}</h3>
                    <p class="text-gray-700 mb-4">${brandDetails.tagline}</p>

                    ${brandDetails.keyFeatures && brandDetails.keyFeatures.length > 0 ? `
                        <h4 class="text-xl font-semibold text-gray-700 mb-2">Key Features:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1 pl-4 mb-4">
                            ${brandDetails.keyFeatures.map((feature, index) => `
                                <li key="${index}">${feature}</li>
                            `).join('')}
                        </ul>
                    ` : ''}

                    ${brandDetails.subNodes && brandDetails.subNodes.length > 0 ? `
                        <h4 class="text-xl font-semibold text-gray-700 mb-2">Associated Sub-Nodes:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1 pl-4 mb-4">
                            ${brandDetails.subNodes.map((subNode, index) => `
                                <li key="${index}">${subNode}</li>
                            `).join('')}
                        </ul>
                    ` : ''}

                    ${brandDetails.metadata && Object.keys(brandDetails.metadata).length > 0 ? `
                        <h4 class="text-xl font-semibold text-gray-700 mb-2">FAA Metadata & Compliance:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1 pl-4 mb-4">
                            ${Object.entries(brandDetails.metadata).map(([key, value]) => `
                                <li key="${key}">
                                    <strong>${key.charAt(0).toUpperCase() + key.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> ${value}
                                </li>
                            `).join('')}
                        </ul>
                    ` : ''}

                    ${brandDetails.metrics && Object.keys(brandDetails.metrics).length > 0 ? `
                        <h4 class="text-xl font-semibold text-gray-700 mb-2">Real-Time Metrics Overview:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1 pl-4 mb-4">
                            ${Object.entries(brandDetails.metrics).map(([key, value]) => `
                                <li key="${key}">
                                    <strong>${key.charAt(0).toUpperCase() + key.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> ${value}
                                </li>
                            `).join('')}
                        </ul>
                    ` : ''}

                    ${brandDetails.ledgerEntries && brandDetails.ledgerEntries.length > 0 ? `
                        <h4 class="text-xl font-semibold text-gray-700 mb-2">VaultTrace‚Ñ¢ Ledger Entries:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1 pl-4 mb-4">
                            ${brandDetails.ledgerEntries.map((entry, index) => `
                                <li key="${index}">${entry}</li>
                            `).join('')}
                        </ul>
                    ` : ''}

                    ${renderPricingCardsComponent()}
                </div>
            `;
        }

        // NEW: Species Management Component
        function renderSpeciesManagementComponent() {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">üêæ Species Management</h3>
                    <p class="text-gray-700 mb-6">
                        Here you can view and manage detailed information for all tracked species within the FAA.Zone‚Ñ¢ network.
                    </p>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${speciesData.map((species) => `
                            <div key="${species.id}" class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200">
                                <h4 class="text-lg font-bold text-gray-800 mb-2">${species.name}</h4>
                                <p class="text-sm text-gray-600 italic mb-2">${species.scientificName}</p>
                                <ul class="text-sm text-gray-700 space-y-1">
                                    <li><strong>Population:</strong> ${species.population}</li>
                                    <li><strong>Status:</strong> <span class="font-semibold ${
                                        species.conservationStatus === 'Critically Endangered' ? 'text-red-600' :
                                        species.conservationStatus === 'Endangered' ? 'text-orange-600' :
                                        species.conservationStatus === 'Vulnerable' ? 'text-yellow-600' :
                                        'text-green-600'
                                    }">${species.conservationStatus}</span></li>
                                    <li><strong>Habitat:</strong> ${species.habitat}</li>
                                    <li><strong>Protocol:</strong> ${species.associatedProtocol}</li>
                                    <li><strong>Last Observed:</strong> ${species.lastObserved}</li>
                                    <li><strong>Location:</strong> ${species.location}</li>
                                </ul>
                                <p class="text-xs text-gray-500 mt-3">${species.description}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // --- New Components for HTML Pages ---

        function renderWildlifeDashboardHTMLComponent() {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">Wildlife Dashboard ‚Äì FAA.Zone‚Ñ¢ (Original HTML)</h3>
                    <div class="text-gray-700 space-y-4">
                        <!-- HEADER + NAV -->
                        <header class="bg-white shadow p-6 flex justify-between items-center">
                            <div>
                                <h1 class="text-3xl font-extrabold text-indigo-700">üå≥ Wildlife Sector Dashboard</h1>
                                <p class="text-sm text-gray-500">FAA.Zone‚Ñ¢ Sovereign Scrolls‚Ñ¢ ¬∑ Wildlife Grid‚Ñ¢</p>
                            </div>
                            <div class="flex gap-3 text-sm">
                                <a href="#" class="px-4 py-2 bg-blue-500 text-white rounded glow-btn">Admin Login</a>
                                <a href="#" class="px-4 py-2 bg-gray-600 text-white rounded glow-btn">Node Setup</a>
                                <a href="#" class="px-4 py-2 bg-green-500 text-white rounded glow-btn">Distributor Portal</a>
                            </div>
                        </header>
                        <!-- SUBNAV -->
                        <nav class="bg-gray-100 flex flex-col gap-3 px-6 py-3 text-sm overflow-x-auto whitespace-nowrap">
                            <div class="flex gap-6">
                                <a href="#" class="hover:text-indigo-600">Quick View</a>
                                <a href="#" class="hover:text-indigo-600">Pulse Monitor‚Ñ¢</a>
                                <a href="#" class="hover:text-indigo-600">Sales Dashboard</a>
                                <a href="#" class="hover:text-indigo-600">Ethics</a>
                                <a href="#" class="hover:text-indigo-600">Node Reports</a>
                                <a href="#" class="hover:text-indigo-600">Licensing</a>
                                <a href="#" class="text-green-600 font-semibold">üí∞ Pricing</a>
                                <a href="#" class="text-blue-600 font-semibold">üá∞üá™ Kenya Deployment</a>
                            </div>
                            <div class="text-xs text-gray-400 mt-2">
                                FAA.Zone‚Ñ¢ Sovereign Scrolls‚Ñ¢ ¬∑ VaultMesh‚Ñ¢ ¬∑ TreatyMesh‚Ñ¢ Validated
                            </div>
                        </nav>

                        <!-- WILDLIFE DASHBOARD -->
                        <section class="max-w-7xl mx-auto px-6 py-8">
                            <div class="bg-white p-6 rounded shadow">
                                <h2 class="text-xl font-bold text-gray-700">üìä Wildlife Node Dashboard</h2>
                                <p class="text-sm text-gray-500">Explore node features and settings for optimal wildlife management.</p>

                                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-indigo-50 transition">
                                        üå≥ Core Node‚Ñ¢<br/><span class="text-xs">Root-Sync‚Ñ¢ AI Layer</span>
                                    </a>
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-indigo-50 transition">
                                        üåç Geo Lens‚Ñ¢<br/><span class="text-xs">Geospatial LinkVision‚Ñ¢</span>
                                    </a>
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-indigo-50 transition">
                                        ‚ö° Energy Beacon‚Ñ¢<br/><span class="text-xs">EcoPulse Radiants‚Ñ¢</span>
                                    </a>
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-indigo-50 transition">
                                        üõ°Ô∏è Security Perimeter‚Ñ¢<br/><span class="text-xs">Baobab PermaFence‚Ñ¢</span>
                                    </a>
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-indigo-50 transition">
                                        üöÅ Drone Sentinel‚Ñ¢<br/><span class="text-xs">AetherNet Hawks‚Ñ¢</span>
                                    </a>
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-indigo-50 transition">
                                        ü¶Å Fauna Tag‚Ñ¢<br/><span class="text-xs">Sentinel Ring‚Ñ¢</span>
                                    </a>
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-indigo-50 transition">
                                        üßç‚Äç‚ôÇÔ∏è Human Input Port‚Ñ¢<br/><span class="text-xs">SRI HoloBridge‚Ñ¢</span>
                                    </a>
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-indigo-50 transition">
                                        üå† Celestial Aligner‚Ñ¢<br/><span class="text-xs">AstroLattice‚Ñ¢ Actuator</span>
                                    </a>
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-indigo-50 transition">
                                        üåä Plastic Crisis Node‚Ñ¢<br/><span class="text-xs">Maritime Purifier‚Ñ¢</span>
                                    </a>
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-indigo-50 transition">
                                        üê¨ Poacher Jammer‚Ñ¢<br/><span class="text-xs">HunterBlackout Protocol‚Ñ¢</span>
                                    </a>
                                    <a href="#" class="block p-4 bg-gray-100 rounded shadow hover:bg-green-50 transition">
                                        üá∞üá™ Kenya Deployment‚Ñ¢<br/><span class="text-xs">Scroll-Licensed FAA Zone‚Ñ¢</span>
                                    </a>
                                </div>
                            </div>
                        </section>

                        <!-- PRODUCT DESCRIPTION SECTION -->
                        <section class="max-w-7xl mx-auto px-6 py-8 bg-white rounded shadow space-y-6">
                            <h2 class="text-2xl font-bold text-gray-800">üåç Detailed Product Descriptions</h2>

                            <!-- Core Node -->
                            <div class="node-description">
                                <h3 class="text-lg font-semibold text-indigo-600">Core Node‚Ñ¢ üå≥üîó</h3>
                                <p><strong>Purpose:</strong> Centralized Baobab‚Ñ¢ Seed Logic Node</p>
                                <p><strong>FAA‚Ñ¢ Descriptor:</strong> Root-Sync‚Ñ¢ AI Layer</p>
                                <p>This node acts as the central core of your system, managing and synchronizing the core AI logic for the Baobab‚Ñ¢ network. It coordinates data flow and decision-making processes across all connected nodes.</p>
                                <p><strong>Hardware Requirements:</strong> 16GB RAM, 256GB SSD, 8-core CPU</p>
                                <p><strong>Model Number:</strong> Core-Node-MX12-256GB</p>
                                <p><strong>Integration:</strong> Supports AI synchronization across all nodes</p>
                                <p><strong>Setup:</strong> Easy setup via Cloud integration for seamless AI operations.</p>
                            </div>

                            <!-- Geo Lens -->
                            <div class="node-description">
                                <h3 class="text-lg font-semibold text-blue-600">Geo Lens‚Ñ¢ üåçüì°</h3>
                                <p><strong>Purpose:</strong> Global mapping with real-time eco-stream</p>
                                <p><strong>FAA‚Ñ¢ Descriptor:</strong> Geospatial LinkVision‚Ñ¢</p>
                                <p>This node provides real-time mapping and geospatial data streaming, useful for tracking environmental conditions, ecosystem health, and coordinating resources for wildlife monitoring.</p>
                                <p><strong>Hardware Requirements:</strong> 32GB RAM, 512GB SSD, 10-core CPU</p>
                                <p><strong>Model Number:</strong> GeoLens-Track-512</p>
                                <p><strong>Integration:</strong> Easily integrates with global satellite data streams</p>
                                <p><strong>Setup:</strong> Configurable through a web interface, ensuring rapid deployment.</p>
                            </div>

                            <!-- Energy Beacon -->
                            <div class="node-description">
                                <h3 class="text-lg font-semibold text-yellow-600">Energy Beacon‚Ñ¢ ‚ö°üîÜ</h3>
                                <p><strong>Purpose:</strong> AI-optimized solar + kinetic grid modules</p>
                                <p><strong>FAA‚Ñ¢ Descriptor:</strong> EcoPulse Radiants‚Ñ¢</p>
                                <p>This node represents a sustainable energy system that combines solar and kinetic energy sources, optimized through AI. It powers network nodes with eco-friendly energy sources.</p>
                                <p><strong>Hardware Requirements:</strong> 12V battery, Solar Panel 500W, Kinetic Generator</p>
                                <p><strong>Model Number:</strong> EnergyBeam-Solar-Kinet</p>
                                <p><strong>Integration:</strong> Seamlessly integrates with energy-efficient infrastructure for grid operations</p>
                                <p><strong>Setup:</strong> Simple setup with minimal configuration required, deployable in both urban and rural areas.</p>
                            </div>

                            <!-- Security Perimeter -->
                            <div class="node-description">
                                <h3 class="text-lg font-semibold text-green-600">Security Perimeter‚Ñ¢ üõ°Ô∏èüå±</h3>
                                <p><strong>Purpose:</strong> Wildlife + data defense shell</p>
                                <p><strong>FAA‚Ñ¢ Descriptor:</strong> Baobab PermaFence‚Ñ¢</p>
                                <p>This node is designed as a security defense perimeter, both for protecting sensitive wildlife environments and ensuring data security. Likely integrates environmental monitoring to detect threats or breaches.</p>
                                <p><strong>Hardware Requirements:</strong> 32GB RAM, 512GB SSD, Network Antennas</p>
                                <p><strong>Model Number:</strong> PermaFence-Guard</p>
                                <p><strong>Integration:</strong> Integrates with remote surveillance systems and environmental sensors</p>
                                <p><strong>Setup:</strong> Quick deployment with cloud integration for remote monitoring.</p>
                            </div>

                            <!-- Drone Sentinel -->
                            <div class="node-description">
                                <h3 class="text-lg font-semibold text-purple-600">Drone Sentinel‚Ñ¢ üöÅüëÅÔ∏è</h3>
                                <p><strong>Purpose:</strong> Sky-level pattern analyzers + threat dispatch</p>
                                <p><strong>FAA‚Ñ¢ Descriptor:</strong> AetherNet Hawks‚Ñ¢</p>
                                <p>This node includes drone-based systems for high-level pattern analysis in the sky, providing a sentinel role that monitors wildlife and environmental activity, as well as dispatching action in response to identified threats.</p>
                                <p><strong>Hardware Requirements:</strong> Drone Sensors, 16GB RAM, 256GB SSD</p>
                                <p><strong>Model Number:</strong> AetherNet-Drone-X</p>
                                <p><strong>Integration:</strong> Real-time flight and threat analysis, with automated threat response.</p>
                                <p><strong>Setup:</strong> Setup involves deploying drones and connecting them to the cloud control system.</p>
                            </div>

                            <!-- Fauna Tag -->
                            <div class="node-description">
                                <h3 class="text-lg font-semibold text-orange-600">Fauna Tag‚Ñ¢ ü¶Åüîò</h3>
                                <p><strong>Purpose:</strong> Animal-tracking energy portals</p>
                                <p><strong>FAA‚Ñ¢ Descriptor:</strong> Sentinel Ring‚Ñ¢</p>
                                <p>This node involves the use of energy portals for tracking wildlife, such as animal tagging and monitoring their movements in real-time. This could be vital for conservation efforts, tracking endangered species, and ensuring their safety.</p>
                                <p><strong>Hardware Requirements:</strong> Animal Tagging Devices, GPS Tracker, 16GB RAM</p>
                                <p><strong>Model Number:</strong> FaunaTrack-TagX</p>
                                <p><strong>Integration:</strong> Integrates with environmental databases and cloud analytics</p>
                                <p><strong>Setup:</strong> Fast deployment with minimal equipment and configuration required.</p>
                            </div>

                            <!-- Human Input Port -->
                            <div class="node-description">
                                <h3 class="text-lg font-semibold text-red-600">Human Input Port‚Ñ¢ üßç‚Äç‚ôÇÔ∏èüåÄ</h3>
                                <p><strong>Purpose:</strong> Local participant interface with AI</p>
                                <p><strong>FAA‚Ñ¢ Descriptor:</strong> SRI HoloBridge‚Ñ¢</p>
                                <p>This node connects humans to the system via an interactive interface (potentially a holographic bridge or AR/VR interface). It allows human participants to directly interact with and guide the AI system for decision-making, resource allocation, or environmental management.</p>
                                <p><strong>Hardware Requirements:</strong> AR/VR Headset, 32GB RAM</p>
                                <p><strong>Model Number:</strong> HoloBridge-Input</p>
                                <p><strong>Integration:</strong> Allows human participants to interact directly with AI systems for decision-making</p>
                                <p><strong>Setup:</strong> Connects via a local interface or VR system for immersive experiences.</p>
                            </div>

                            <!-- Celestial Aligner -->
                            <div class="node-description">
                                <h3 class="text-lg font-semibold text-teal-600">Celestial Aligner‚Ñ¢ üå†‚õì</h3>
                                <p><strong>Purpose:</strong> Root ‚Üî Star lattice sync overlay</p>
                                <p><strong>FAA‚Ñ¢ Descriptor:</strong> AstroLattice‚Ñ¢ Actuator</p>
                                <p>This node involves lattice synchronization, aligning Earth-based systems with celestial objects or cosmic forces, creating a universal or planetary overlay. It might be involved in astrophysical monitoring or space-energy synchronization.</p>
                                <p><strong>Hardware Requirements:</strong> Celestial Synchronization Modules, 64GB RAM</p>
                                <p><strong>Model Number:</strong> AstroLattice-Align</p>
                                <p><strong>Integration:</strong> Links terrestrial systems with cosmic or celestial data streams.</p>
                                <p><strong>Setup:</strong> Setup involves configuring celestial data streams and connecting to cosmic observatories.</p>
                            </div>

                            <!-- Plastic Crisis Node -->
                            <div class="node-description">
                                <h3 class="text-lg font-semibold text-blue-600">Plastic Crisis Node‚Ñ¢ üåäüöØ</h3>
                                <p><strong>Purpose:</strong> Oceanic AI cleanup and detection</p>
                                <p><strong>FAA‚Ñ¢ Descriptor:</strong> Maritime Purifier‚Ñ¢</p>
                                <p>This node is designed to address the plastic pollution crisis in the oceans, using AI to detect and clean up plastic waste. It could employ robots, drones, or other tech to purify ocean waters and maintain ecological balance.</p>
                                <p><strong>Hardware Requirements:</strong> Oceanic Cleaners, AI Processing Units</p>
                                <p><strong>Model Number:</strong> MaritimeClean-X</p>
                                <p><strong>Integration:</strong> Integrates with AI-powered drones for real-time cleanup.</p>
                                <p><strong>Setup:</strong> Rapid deployment with AI-driven processes for automatic operation.</p>
                            </div>

                            <!-- Poacher Jammer -->
                            <div class="node-description">
                                <h3 class="text-lg font-semibold text-purple-600">Poacher Jammer‚Ñ¢ üê¨üö´üì∂</h3>
                                <p><strong>Purpose:</strong> Signal disruptor & interdiction AI</p>
                                <p><strong>FAA‚Ñ¢ Descriptor:</strong> HunterBlackout Protocol‚Ñ¢</p>
                                <p>This node represents an AI-driven system designed to disrupt poacher communications and interfere with illegal hunting activities. It could use signal jamming or AI-driven interdiction techniques to prevent harmful activities targeting wildlife.</p>
                                <p><strong>Hardware Requirements:</strong> Signal Jammer, 8-core CPU, 16GB RAM</p>
                                <p><strong>Model Number:</strong> PoacherJam-Block</p>
                                <p><strong>Integration:</strong> Real-time communication jamming and automated poacher tracking.</p>
                                <p><strong>Setup:</strong> Fast deployment with cloud-based control for remote activation.</p>
                            </div>
                        </section>
                        <!-- FOOTER -->
                        <footer class="text-center text-xs text-gray-400 mt-16 py-6 border-t">
                            FAA.Zone‚Ñ¢ Sovereign Scrolls‚Ñ¢ ¬∑ VaultMesh‚Ñ¢ ¬∑ TreatyMesh‚Ñ¢ Validated
                        </footer>
                    </div>
                </div>
            `;
        }

        function renderQuickViewHTMLComponent() {
            return `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">Quick View ‚Äì FAA.Zone‚Ñ¢ (Original HTML)</h3>
                    <div class="text-gray-700 space-y-4">
                        <!-- HEADER -->
                        <header class="bg-white shadow p-6 flex justify-between items-center">
                            <div>
                                <h1 class="text-3xl font-extrabold text-green-700">üåø Quick View Dashboard</h1>
                                <p class="text-sm text-gray-500">FAA.Zone‚Ñ¢ Wildlife Grid‚Ñ¢ Snapshot</p>
                            </div>
                        </header>

                        <!-- QUICK GRID STATS -->
                        <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-10">
                            <div class="bg-white p-5 rounded shadow">
                                <h2 class="text-lg font-bold">üß† Active Core Nodes‚Ñ¢</h2>
                                <p class="text-2xl text-indigo-700 font-extrabold">12</p>
                                <p class="text-xs text-gray-500">Synced with VaultMesh‚Ñ¢ ¬∑ 99.9% uptime</p>
                                <p class="text-xs mt-2">These are your Root-Sync‚Ñ¢ AI layers currently deployed, forming the logic backbone of the grid. Synced = ‚úÖ Passed heartbeat & chain integrity.</p>
                            </div>
                            <div class="bg-white p-5 rounded shadow">
                                <h2 class="text-lg font-bold">üì° Geo Nodes‚Ñ¢ Online</h2>
                                <p class="text-2xl text-green-600 font-extrabold">9</p>
                                <p class="text-xs text-gray-500">Real-time mapping nodes ¬∑ Heatmap ready</p>
                                <p class="text-xs mt-2">Streaming environmental data, syncing fauna overlays and feeding drone mapping visuals.</p>
                            </div>
                            <div class="bg-white p-5 rounded shadow">
                                <h2 class="text-lg font-bold">‚ö° Energy Nodes‚Ñ¢ Operational</h2>
                                <p class="text-2xl text-yellow-600 font-extrabold">15</p>
                                <p class="text-xs text-gray-500">Solar/Kinetic Grid‚Ñ¢ ¬∑ Avg Yield: 780W</p>
                                <p class="text-xs mt-2">These provide renewable grid uptime and backup energy for remote wildlife node infrastructure.</p>
                            </div>
                            <div class="bg-white p-5 rounded shadow">
                                <h2 class="text-lg font-bold">üõ°Ô∏è Secure Perimeter Nodes‚Ñ¢</h2>
                                <p class="text-2xl text-red-600 font-extrabold">8</p>
                                <p class="text-xs text-gray-500">GhostTrace‚Ñ¢ perimeter ¬∑ 3 threats in last 24h</p>
                                <p class="text-xs mt-2">Perimeter nodes monitor real-time breaches and activate defense protocols against illegal activity.</p>
                            </div>
                            <div class="bg-white p-5 rounded shadow">
                                <h2 class="text-lg font-bold">üì¶ Total Omnidrop Kits‚Ñ¢</h2>
                                <p class="text-2xl text-purple-600 font-extrabold">45</p>
                                <p class="text-xs text-gray-500">Issued ¬∑ Node-match log available</p>
                                <p class="text-xs mt-2">Includes RootCable‚Ñ¢, GlyphRouter‚Ñ¢, SyncSphere‚Ñ¢ ¬∑ Foundation hardware for node claim and activation.</p>
                            </div>
                            <div class="bg-white p-5 rounded shadow">
                                <h2 class="text-lg font-bold">üåç Deployment Regions</h2>
                                <p class="text-sm">RSA, Kenya, Namibia, Botswana</p>
                                <p class="text-xs text-gray-500 mt-1">Scroll-protected ¬∑ Licensing linked</p>
                                <p class="text-xs mt-2">Territories under FAA TreatyMesh‚Ñ¢ with deployed, scroll-licensed infrastructure. Color-coding suggested for legacy vs expansion nodes.</p>
                            </div>
                        </section>

                        <!-- SUMMARY + LINKS -->
                        <section class="mt-12 bg-white p-6 rounded shadow">
                            <h3 class="text-xl font-bold text-indigo-700 mb-4">üßæ FAA Node Sync Summary</h3>
                            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
                                <li>All Core Nodes‚Ñ¢ synced every 9s via PulseGenesis‚Ñ¢</li>
                                <li>AI interfaces monitored through ScrollStack‚Ñ¢ overlay</li>
                                <li>Deployment expansion scheduled Q3 2025</li>
                                <li>VaultPay‚Ñ¢ Node Class III ¬∑ ClaimRoot‚Ñ¢ Verified</li>
                                <li>Omnidrop Sync Kit‚Ñ¢: RootCable‚Ñ¢, GlyphRouter‚Ñ¢, SyncSphere‚Ñ¢</li>
                                <li><a href="#" class="text-blue-600 underline">üìà Open Pulse Monitor‚Ñ¢</a></li>
                                <li><a href="#" class="text-blue-600 underline">üìä View Node Reports</a></li>
                                <li><a href="#" class="text-blue-600 underline">üí∞ View Licensing & Pricing</a></li>
                                <li><a href="#" class="text-blue-600 underline">üá∞üá™ Kenya Wildlife Deployment</a></li>
                            </ul>
                            <div class="mt-6 text-right">
                               <a href="#" class="text-blue-600 underline font-semibold">üîô Return to Wildlife Dashboard</a>
                            </div>
                        </section>

                        <!-- FOOTER -->
                        <footer class="text-center text-xs text-gray-400 mt-16 pt-6 border-t">
                            FAA.Zone‚Ñ¢ Sovereign Scrolls‚Ñ¢ ¬∑ VaultMesh‚Ñ¢ Synced ¬∑ TreatyMesh‚Ñ¢ Wildlife Grid‚Ñ¢
                        </footer>
                    </div>
                </div>
            `;
        }

        function renderKenyaDeploymentHTMLComponent() {
            // This function needs to be called after the HTML is rendered to update dynamic elements
            function updateKenyaDeploymentTimes() {
                const now = new Date();
                const mapUpdateTimeElement = document.getElementById("mapUpdateTime");
                const geoLastSignalElement = document.getElementById("geoLastSignal");

                if (mapUpdateTimeElement) {
                    mapUpdateTimeElement.textContent = now.toLocaleString();
                }
                if (geoLastSignalElement) {
                    geoLastSignalElement.textContent = now.toLocaleTimeString();
                }
            }

            // Return the HTML string
            const htmlString = `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">Kenya Wildlife Deployment ‚Äì FAA.Zone‚Ñ¢ (Original HTML)</h3>
                    <div class="text-gray-700 space-y-4">
                        <!-- HEADER -->
                        <header class="bg-white shadow p-6 flex justify-between items-center">
                            <div>
                                <h1 class="text-3xl font-extrabold text-green-700">üá∞üá™ Kenya Region Overview</h1>
                                <p class="text-sm text-gray-500">FAA.Zone‚Ñ¢ Verified Scroll Deployment ¬∑ TreatyMesh‚Ñ¢ Linked</p>
                            </div>
                            <a href="#" class="text-sm text-blue-600 underline">‚Üê Back to Quick View</a>
                        </header>

                        <!-- REGION DETAILS -->
                        <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-10">
                            <div class="bg-white p-6 rounded shadow">
                                <h2 class="text-lg font-bold">üß† Core Nodes‚Ñ¢</h2>
                                <p class="text-2xl text-indigo-700 font-extrabold">3</p>
                                <ul class="text-xs mt-2 text-gray-800 list-disc list-inside">
                                    <li>AI sync rate: every 9s via PulseGenesis‚Ñ¢</li>
                                    <li>Downstream nodes managed: 17</li>
                                    <li>Manual intervention reduced: 93%</li>
                                    <li>Tasks: Drone routing logic, FaunaTag‚Ñ¢ data decisioning</li>
                                </ul>
                                <p class="text-xs mt-2 text-gray-500">Root-Sync‚Ñ¢ Layer ¬∑ ClaimRoot‚Ñ¢ verified</p>
                            </div>

                            <div class="bg-white p-6 rounded shadow">
                                <h2 class="text-lg font-bold">üö±Ô∏è Geo Lenses‚Ñ¢ Active</h2>
                                <p class="text-2xl text-green-600 font-extrabold">2</p>
                                <ul class="text-xs mt-2 text-gray-800 list-disc list-inside">
                                    <li>Zones: Tsavo East + Samburu East</li>
                                    <li>Avg pings/hour: 8,400 (Temp, Humidity, Terrain)</li>
                                    <li>Uplink interval: every 15s to Core Node‚Ñ¢</li>
                                    <li>Triggers this week: 3 migratory heatmap events</li>
                                    <li>Drone reactions: 2 repositioning pings triggered</li>
                                    <li>Overlays exported: ScrollStack‚Ñ¢ FieldFeed‚Ñ¢ Active</li>
                                </ul>
                                <p class="text-xs text-gray-500 mt-2">Geo Lens‚Ñ¢ IDs: KEN-GL-34A, KEN-GL-34B ¬∑ Last signal: <span id="geoLastSignal">--:--</span></p>
                            </div>

                            <div class="bg-white p-6 rounded shadow">
                                <h2 class="text-lg font-bold">‚ö° Energy Beacon Units‚Ñ¢</h2>
                                <p class="text-2xl text-yellow-600 font-extrabold">4</p>
                                <p class="text-xs mt-2">What they do: Deliver grid-free solar + kinetic energy to sustain node operations during blackouts. Backup cycles are holding 810W avg, vital for uplink zones without infrastructure.</p>
                                <p class="text-xs mt-2 text-gray-500">EcoPulse Radiants‚Ñ¢ ¬∑ Avg Yield: 810W ¬∑ Grid-buffered</p>
                            </div>

                            <div class="bg-white p-6 rounded shadow">
                                <h2 class="text-lg font-bold">üõ°Ô∏è Secure Nodes‚Ñ¢</h2>
                                <p class="text-2xl text-red-600 font-extrabold">2</p>
                                <p class="text-xs mt-2">What they do: These run GhostTrace‚Ñ¢ perimeter logic to detect illegal movement near buffer zones. Triggered 2 escalations and blocked a perimeter breach attempt this week.</p>
                                <p class="text-xs mt-2 text-gray-500">GhostTrace‚Ñ¢ Enabled ¬∑ 2 threats logged (last 48h)</p>
                            </div>

                            <div class="bg-white p-6 rounded shadow">
                                <h2 class="text-lg font-bold">üì¶ Omnidrop Kits‚Ñ¢ Used</h2>
                                <p class="text-2xl text-purple-600 font-extrabold">6</p>
                                <p class="text-xs mt-2">What they do: Full kits deployed in conservation zones. Used to activate new scrolls and connect physical devices to VaultMesh‚Ñ¢. Three assigned to RhinoTag‚Ñ¢ and three to corridor Node-C5.</p>
                                <p class="text-xs mt-2 text-gray-500">Includes RootCable‚Ñ¢, GlyphRouter‚Ñ¢, SyncSphere‚Ñ¢</p>
                            </div>

                            <div class="bg-white p-6 rounded shadow">
                                <h2 class="text-lg font-bold">üîó Licensing & Scroll ID</h2>
                                <p class="text-sm">Scroll ID: KENYA-FAAZ-4312</p>
                                <p class="text-xs mt-2">What it means: This region is scroll-licensed. It ensures Kenya's deployment complies with FAA TreatyMesh‚Ñ¢ and can access revenue from PulseTrade‚Ñ¢ token emissions.</p>
                                <p class="text-xs mt-2 text-gray-500">TreatyMesh‚Ñ¢ certified ¬∑ FAA VaultMesh‚Ñ¢ enabled</p>
                            </div>
                        </section>

                        <!-- LIVE MAP DISPLAY -->
                        <section class="mt-12 bg-white p-6 rounded shadow">
                            <h3 class="text-xl font-bold text-indigo-700 mb-4">üõ∞Ô∏è Geo Lens‚Ñ¢ Live Activity Map</h3>

                            <div class="w-full h-[500px] rounded overflow-hidden border border-indigo-100 shadow-inner">
                                <iframe
                                    src="https://scrollmap.faa.zone/kenya/tsavo-samburu-live?overlay=ecozone&theme=light"
                                    class="w-full h-full"
                                    frameBorder="0"
                                    title="FAA Kenya Wildlife Geo Lens‚Ñ¢ Map"
                                    loading="lazy"
                                ></iframe>
                            </div>

                            <p class="text-xs text-gray-500 mt-3 italic">
                                Powered by FAA.MapModule‚Ñ¢ via ScrollFeed‚Ñ¢ ¬∑ Uplink from Geo Lens‚Ñ¢ Nodes KEN-GL-34A / 34B ¬∑ Last sync:
                                <span id="mapUpdateTime">...</span>
                            </p>
                        </section>

                        <!-- REGION FOOTPRINT -->
                        <section class="mt-12 bg-white p-6 rounded shadow">
                            <h3 class="text-xl font-bold text-green-700 mb-2">ü©æ Operational Snapshot</h3>
                            <ul class="list-disc list-inside text-sm space-y-1 text-gray-700">
                                <li>3 Core Nodes‚Ñ¢ managing Baobab‚Ñ¢ AI logic and sync layers</li>
                                <li>Energy yield consistent across 4 solar + kinetic beacons</li>
                                <li>Geo Lens‚Ñ¢ data streams live to ScrollStack‚Ñ¢ every 15s ‚Äî including active telemetry from Tsavo North and Samburu East. Lions tagged under Cluster K-3 are currently observed migrating northeast, triggering drone lens repositioning every 90s. AI overlays suggest high-density grazing patterns near river delta nodes.</li>
                                <li>2 Secure Perimeter nodes‚Ñ¢ fencing southern conservation zones</li>
                                <li>Wildlife tag routes monitored via Fauna Tag‚Ñ¢ uplinks</li>
                                <li>All nodes passed latest Scroll Echo‚Ñ¢ validation</li>
                            </ul>
                        </section>

                        <!-- FOOTER -->
                        <footer class="text-center text-xs text-gray-400 mt-16 pt-6 border-t">
                            FAA.Zone‚Ñ¢ Kenya Node Index ¬∑ ScrollStack‚Ñ¢ Powered ¬∑ TreatyMesh‚Ñ¢ Wildlife Verified
                        </footer>
                    </div>
                </div>
            `;
            // After rendering the HTML, call the update function
            setTimeout(updateKenyaDeploymentTimes, 0); // Use setTimeout to ensure DOM is ready
            return htmlString;
        }

        function renderCoreNodeHTMLComponent() {
            // This function will render the HTML and then initialize the Chart.js chart
            // We need a unique ID for the canvas if multiple instances could be rendered
            const canvasId = 'pulseChart-' + Math.random().toString(36).substr(2, 9);

            // Return the HTML string with the canvas element
            const htmlString = `
                <div class="p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">Core Node‚Ñ¢ ‚Äì FAA.Zone‚Ñ¢ (Original HTML)</h3>
                    <div class="text-gray-700 space-y-4">
                        <!-- HEADER + NAV -->
                        <header class="bg-white shadow p-6 flex justify-between items-center">
                            <div>
                                <h1 class="text-3xl font-extrabold text-indigo-700">üå≥ üå≥ Core Node‚Ñ¢ Dashboard</h1>
                                <p class="text-sm text-gray-500">FAA.Zone‚Ñ¢ Sovereign Scrolls‚Ñ¢ ¬∑ Wildlife Grid‚Ñ¢</p>
                            </div>
                            <div class="flex gap-3 text-sm">
                                <a href="#" class="px-4 py-2 bg-blue-500 text-white rounded glow-btn">Admin Login</a>
                                <a href="#" class="px-4 py-2 bg-gray-600 text-white rounded glow-btn">Node Setup</a>
                                <a href="#" class="px-4 py-2 bg-green-500 text-white rounded glow-btn">Distributor Portal</a>
                            </div>
                        </header>

                        <!-- SUBNAV -->
                        <nav class="bg-gray-100 flex flex-col gap-3 px-6 py-3 text-sm overflow-x-auto whitespace-nowrap">
                            <div class="flex gap-6">
                                <a href="#" class="hover:text-indigo-600">Quick View</a>
                                <a href="#" class="hover:text-indigo-600">Pulse Monitor‚Ñ¢</a>
                                <a href="#" class="hover:text-indigo-600">Sales Dashboard</a>
                                <a href="#" class="hover:text-indigo-600">Ethics</a>
                                <a href="#" class="hover:text-indigo-600">Node Reports</a>
                                <a href="#" class="hover:text-indigo-600">Licensing</a>
                                <a href="#" class="hover:text-indigo-600">üá∞üá™ Kenya Wildlife Deployment</a>
                                <a href="#" class="text-green-600 font-semibold">üí∞ Pricing</a>
                            </div>
                            <div class="text-xs text-gray-400 mt-2">
                                FAA.Zone‚Ñ¢ Sovereign Scrolls‚Ñ¢ ¬∑ VaultMesh‚Ñ¢ ¬∑ TreatyMesh‚Ñ¢ Validated
                            </div>
                        </nav>

                        <!-- Node Details -->
                        <section class="mb-10 space-y-2 text-sm leading-relaxed">
                            <p><strong>Purpose:</strong> Centralized Baobab‚Ñ¢ Seed Logic Node</p>
                            <p><strong>License:</strong> Master $85,000 ¬∑ Monthly $1,500 ¬∑ Royalty 4%</p>
                            <p><strong>PulseTrade‚Ñ¢:</strong> 9-second payout logic</p>
                            <p><strong>ClaimRoot‚Ñ¢:</strong> Verified via VaultMaster Authority</p>
                            <p><strong>VaultPay‚Ñ¢ Tier:</strong> Node Class III</p>
                            <p><strong>Clone Protection:</strong> GhostTrace‚Ñ¢ SHA-3 encryption enabled</p>
                            <p><strong>Deployment Regions:</strong> RSA ¬∑ Namibia ¬∑ Kenya</p>
                            <p><strong>Family Bundle:</strong> BaobabGrid‚Ñ¢ v4 ‚Äì 12 Nodes</p>
                            <p><strong>Hardware Requirements:</strong> 16GB RAM, 256GB SSD, 8-core CPU</p>
                            <p><strong>Model Number:</strong> Core-Node-MX12-256GB</p>
                            <p><strong>Omnidrop Kit‚Ñ¢:</strong> RootCable‚Ñ¢, GlyphRouter‚Ñ¢, SyncSphere‚Ñ¢</p>
                            <p><strong>Setup:</strong> Cloud-linked installation with PulseGenesis‚Ñ¢ chain sync</p>
                            <p><strong>FAA Links:</strong> <a href="#" class="text-blue-600 underline">VaultMesh‚Ñ¢</a> ¬∑ <a href="#" class="text-blue-600 underline">ScrollStack‚Ñ¢</a> ¬∑ <a href="#" class="text-blue-600 underline">AI Routing Logic</a></p>
                        </section>

                        <!-- Chart Section -->
                        <section class="bg-white p-6 rounded shadow">
                            <h2 class="text-xl font-bold text-indigo-600 mb-4">üìä PulseGraph‚Ñ¢ Metrics</h2>
                            <canvas id="${canvasId}" height="100"></canvas>
                        </section>

                        <!-- Footer -->
                        <footer class="mt-16 text-xs text-center text-gray-400 border-t pt-6">
                            FAA.Zone‚Ñ¢ Sovereign Scrolls‚Ñ¢ ¬∑ VaultMesh‚Ñ¢ Synced ¬∑ TreatyMesh‚Ñ¢ Validated
                        </footer>
                    </div>
                </div>
            `;

            // Initialize Chart.js after the HTML is rendered
            setTimeout(() => {
                const ctx = document.getElementById(canvasId);
                if (ctx) {
                    if (currentChartInstance) {
                        currentChartInstance.destroy(); // Destroy previous chart if it exists
                    }
                    currentChartInstance = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['T-0', 'T-1', 'T-2', 'T-3', 'T-4', 'T-5', 'T-6', 'T-7', 'T-8', 'T-9'],
                            datasets: [{
                                label: 'Core Node‚Ñ¢ Pulse',
                                data: [1600, 1650, 1580, 1720, 1680, 1700, 1750, 1620, 1690, 1710],
                                borderColor: 'hsl(220, 70%, 50%)',
                                borderWidth: 2,
                                fill: false,
                                tension: 0.3
                            }]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: false
                                }
                            },
                            plugins: {
                                legend: {
                                    position: 'bottom'
                                }
                            }
                        }
                    });
                }
            }, 0); // Use setTimeout to ensure the canvas element is in the DOM

            return htmlString;
        }


        // Mapping component names to actual render functions
        const componentMap = {
            MapComponent: renderMapComponent,
            DroneFeedsComponent: renderDroneFeedsComponent,
            TrackerComponent: renderTrackerComponent,
            PowerMonitorComponent: renderPowerMonitorComponent,
            EnvironmentComponent: renderEnvironmentComponent,
            PoacherAlertsComponent: renderPoacherAlertsComponent,
            AccessRiskComponent: renderAccessRiskComponent,
            TimelineComponent: renderTimelineComponent,
            HeatmapComponent: renderHeatmapComponent,
            DeploymentCalculatorComponent: renderDeploymentCalculatorComponent,
            AIRecommenderComponent: renderAIRecommenderComponent,
            HardwareStorefrontComponent: renderHardwareStorefrontComponent,
            ItemDetailComponent: renderItemDetailComponent,
            CompareProductsComponent: renderCompareProductsComponent,
            CompatibilityCheckComponent: renderCompatibilityCheckComponent,
            WarrantyComponent: renderWarrantyComponent,
            ScrollManagerComponent: renderScrollManagerComponent,
            CreateLicenseComponent: renderCreateLicenseComponent,
            GeneratePDFComponent: renderGeneratePDFComponent,
            LicenseMapComponent: renderLicenseMapComponent,
            VaultLogsComponent: renderVaultLogsComponent,
            BrandDetailsComponent: renderBrandDetailsComponent,
            PricingCardsComponent: renderPricingCardsComponent, // This is a sub-component, not directly rendered by main logic
            WildlifeDashboardHTMLComponent: renderWildlifeDashboardHTMLComponent,
            QuickViewHTMLComponent: renderQuickViewHTMLComponent,
            KenyaDeploymentHTMLComponent: renderKenyaDeploymentHTMLComponent,
            CoreNodeHTMLComponent: renderCoreNodeHTMLComponent,
            SpeciesManagementComponent: renderSpeciesManagementComponent,
        };

        // Function to render the active component
        function renderMainContent() {
            const mainContentArea = document.getElementById('main-content-area');
            if (!mainContentArea) return;

            const renderFunction = componentMap[activeContent.component];
            if (renderFunction) {
                mainContentArea.innerHTML = renderFunction(activeContent.props);
            } else {
                mainContentArea.innerHTML = `
                    <div class="p-6 bg-white rounded-lg shadow-md text-center text-gray-500">
                        <h3 class="text-2xl font-bold text-red-500 mb-4">Content Not Found</h3>
                        <p>Please select a valid dashboard section from the sidebar.</p>
                    </div>
                `;
            }
            // After rendering, ensure the chart is destroyed if the component changes
            if (activeContent.component !== 'CoreNodeHTMLComponent' && currentChartInstance) {
                currentChartInstance.destroy();
                currentChartInstance = null;
            }
        }

        // Function to render dynamic content for the RHS panel
        function renderRhsPanelContent() {
            const rhsPanelContentDiv = document.getElementById('rhs-panel-content');
            const rhsPanelTitleElement = document.getElementById('rhs-panel-title');

            if (!rhsPanelContentDiv || !rhsPanelTitleElement) return;

            // Determine the title for the RHS panel based on active content
            const rhsPanelTitle = activeContent.component.replace(/Component$/, '')
                .replace(/HTML$/, '') // Remove HTML suffix for title
                .replace(/([A-Z])/g, ' $1')
                .trim() + " Info";
            rhsPanelTitleElement.textContent = rhsPanelTitle;


            let contentHtml = '';
            // If a BrandDetailsComponent is active, display its metadata and metrics
            if (activeContent.component === "BrandDetailsComponent" && activeContent.props.brandDetails) {
                const { metadata, metrics } = activeContent.props.brandDetails;
                contentHtml = `
                    <div class="text-gray-300">
                        <h3 class="text-lg font-bold text-blue-400 mb-3">Protocol Summary</h3>
                        ${metadata && Object.keys(metadata).length > 0 ? `
                            <h4 class="text-md font-semibold text-gray-300 mb-2">Metadata:</h4>
                            <ul class="list-disc list-inside text-sm space-y-1 mb-4">
                                ${Object.entries(metadata).map(([key, value]) => `
                                    <li key="${key}">
                                        <strong>${key.charAt(0).toUpperCase() + key.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> ${value}
                                    </li>
                                `).join('')}
                            </ul>
                        ` : ''}
                        ${metrics && Object.keys(metrics).length > 0 ? `
                            <h4 class="text-md font-semibold text-gray-300 mb-2">Metrics:</h4>
                            <ul class="list-disc list-inside text-sm space-y-1">
                                ${Object.entries(metrics).map(([key, value]) => `
                                    <li key="${key}">
                                        <strong>${key.charAt(0).toUpperCase() + key.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> ${value}
                                    </li>
                                `).join('')}
                            </ul>
                        ` : ''}
                    </div>
                `;
            } else if (activeContent.component === "SpeciesManagementComponent") {
                // Display a summary for Species Management
                contentHtml = `
                    <div class="text-gray-300">
                        <h3 class="text-lg font-bold text-blue-400 mb-3">Species Overview</h3>
                        <p class="text-sm mb-2">Total Tracked Species: ${speciesData.length}</p>
                        <p class="text-sm mb-4">This section provides detailed information on individual species, their conservation status, and associated protocols. You can expand this data to include more species or filtering options.</p>
                        <h4 class="text-md font-semibold text-gray-300 mb-2">Quick Stats:</h4>
                        <ul class="list-disc list-inside text-xs space-y-1">
                            <li>Critically Endangered: ${speciesData.filter(s => s.conservationStatus === 'Critically Endangered').length}</li>
                            <li>Endangered: ${speciesData.filter(s => s.conservationStatus === 'Endangered').length}</li>
                            <li>Vulnerable: ${speciesData.filter(s => s.conservationStatus === 'Vulnerable').length}</li>
                        </ul>
                    </div>
                `;
            }
            else if (activeContent.component.endsWith("HTMLComponent")) {
                // For HTML components, display a generic message or specific links if available
                contentHtml = `
                    <div class="text-gray-300">
                        <p class="mb-4">This panel provides supplementary information for the selected legacy page.</p>
                        <ul class="mt-4 list-disc list-inside text-xs">
                            <li>Links to related resources.</li>
                            <li>Quick overview of page content.</li>
                            <li>Status updates.</li>
                        </ul>
                    </div>
                `;
            } else {
                // Return empty for other components
                contentHtml = '';
            }
            rhsPanelContentDiv.innerHTML = contentHtml;
        }

        // Function to render the sidebar navigation
        function renderSidebarNav() {
            const sidebarNav = document.getElementById('sidebar-nav');
            if (!sidebarNav) return;

            sidebarNav.innerHTML = ''; // Clear existing nav

            dashboardSections.forEach((section, index) => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'mb-4';

                if (section.type === "link") {
                    // Direct link category header and items
                    sectionDiv.innerHTML = `
                        <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-2">
                            ${section.category}
                        </h3>
                        <ul>
                            ${section.items.map((item, itemIndex) => `
                                <li class="mb-2">
                                    <button
                                        data-component="${item.component}"
                                        data-description="${item.description || ''}"
                                        class="flex items-center w-full p-2 rounded-md text-left transition-colors duration-200
                                        ${activeContent.component === item.component ? 'bg-green-600 text-white shadow-md' : 'hover:bg-gray-700 text-gray-200'}"
                                    >
                                        <span class="mr-3 text-lg">${item.icon}</span>
                                        <span class="flex-grow">${item.button}</span>
                                    </button>
                                </li>
                            `).join('')}
                        </ul>
                    `;
                } else {
                    // Nested category with expandable items
                    sectionDiv.innerHTML = `
                        <button
                            data-category="${section.category}"
                            class="flex items-center justify-between w-full p-2 rounded-md text-left text-sm font-semibold text-gray-400 uppercase tracking-wider hover:bg-gray-700 transition-colors duration-200"
                        >
                            ${section.category}
                            <svg
                                class="w-4 h-4 transform transition-transform duration-200 ${openCategory === section.category ? 'rotate-90' : ''}"
                                fill="none"
                                stroke="currentColor"
                                viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                        <ul class="ml-4 mt-2 ${openCategory === section.category ? '' : 'hidden'}">
                            ${section.items.map((item, itemIndex) => `
                                <li class="mb-2">
                                    <button
                                        data-component="${item.component}"
                                        data-description="${item.description || ''}"
                                        data-brand-details='${JSON.stringify(item.brandDetails || {})}'
                                        class="flex items-center w-full p-2 rounded-md text-left text-gray-200 transition-colors duration-200
                                        ${activeContent.component === item.component && JSON.stringify(activeContent.props.brandDetails || {}) === JSON.stringify(item.brandDetails || {})
                                            ? 'bg-green-600 text-white shadow-md'
                                            : 'hover:bg-gray-700'
                                        }"
                                    >
                                        <span class="mr-3 text-lg">${item.icon}</span>
                                        <span class="flex-grow">${item.button}</span>
                                    </button>
                                </li>
                            `).join('')}
                        </ul>
                    `;
                }
                sidebarNav.appendChild(sectionDiv);
            });

            // Attach event listeners after rendering
            attachSidebarEventListeners();
        }

        // Attach event listeners to sidebar buttons
        function attachSidebarEventListeners() {
            document.querySelectorAll('#sidebar-nav button[data-component]').forEach(button => {
                button.onclick = (event) => {
                    const componentName = button.dataset.component;
                    const description = button.dataset.description;
                    let props = { description: description };

                    if (componentName === "BrandDetailsComponent" || componentName.endsWith("HTMLComponent") || componentName === "SpeciesManagementComponent") {
                        try {
                            props = { brandDetails: JSON.parse(button.dataset.brandDetails || '{}') };
                        } catch (e) {
                            props = { description: description }; // Fallback if parsing fails
                        }
                    }

                    activeContent = { component: componentName, props: props };
                    renderMainContent();
                    renderRhsPanelContent();
                    setIsSidebarOpen(false); // Close sidebar on mobile
                    renderSidebarNav(); // Re-render sidebar to update active state
                };
            });

            document.querySelectorAll('#sidebar-nav button[data-category]').forEach(button => {
                button.onclick = () => {
                    const category = button.dataset.category;
                    openCategory = (openCategory === category ? null : category);
                    renderSidebarNav(); // Re-render sidebar to toggle category visibility
                };
            });
        }

        // Toggle sidebar visibility
        function setIsSidebarOpen(isOpen) {
            isSidebarOpen = isOpen;
            const sidebar = document.getElementById('sidebar');
            if (sidebar) {
                if (isSidebarOpen) {
                    sidebar.classList.remove('-translate-x-full');
                    sidebar.classList.add('translate-x-0');
                } else {
                    sidebar.classList.remove('translate-x-0');
                    sidebar.classList.add('-translate-x-full');
                }
            }
        }

        // Toggle RHS panel visibility
        function setIsRhsPanelOpen(isOpen) {
            isRhsPanelOpen = isOpen;
            const rhsPanel = document.getElementById('rhs-panel');
            if (rhsPanel) {
                if (isRhsPanelOpen) {
                    rhsPanel.classList.remove('translate-x-full');
                    rhsPanel.classList.add('translate-x-0');
                } else {
                    rhsPanel.classList.remove('translate-x-0');
                    rhsPanel.classList.add('translate-x-full');
                }
            }
        }

        // Initial render on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Set initial active content to "View Tagged Species"
            activeContent = {
                component: 'TrackerComponent',
                props: { description: 'View Sentinel Ring‚Ñ¢ trackers by animal' }
            };

            renderSidebarNav();
            renderMainContent();
            renderRhsPanelContent();

            // Attach global event listeners
            document.getElementById('mobile-sidebar-toggle').addEventListener('click', () => setIsSidebarOpen(true));
            document.getElementById('sidebar-close').addEventListener('click', () => setIsSidebarOpen(false));
            document.getElementById('rhs-panel-toggle').addEventListener('click', () => setIsRhsPanelOpen(!isRhsPanelOpen));
            document.getElementById('rhs-panel-close').addEventListener('click', () => setIsRhsPanelOpen(false));
        });
    </script>
</body>
</html>
